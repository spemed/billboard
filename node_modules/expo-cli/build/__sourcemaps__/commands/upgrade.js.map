{"version":3,"sources":["commands/upgrade.ts"],"names":["logNewSection","title","spinner","chalk","bold","start","maybeFormatSdkVersion","sdkVersionString","semver","valid","coerce","getUpdatedDependenciesAsync","projectRoot","workflow","targetSdkVersion","exp","pkg","ConfigUtils","getConfig","bundledNativeModules","JsonFile","readAsync","resolveModule","projectDependencies","dependencies","devDependencies","getDependenciesFromBundledNativeModules","sdkVersion","result","Object","keys","forEach","name","log","warn","expoReactNativeTag","facebookReactNativeVersion","facebookReactVersion","relatedPackages","makeBreakingChangesToConfigAsync","targetSdkVersionString","step","rootConfig","readConfigJsonAsync","currentExp","skipSDKVersionRequirement","expo","androidNavigationBar","visible","undefined","succeed","writeConfigJsonAsync","stopAndPersist","symbol","text","red","e","fail","message","maybeBailOnUnsafeFunctionalityAsync","Versions","gteSdkVersion","program","nonInteractive","answer","type","attemptOldUpdate","newLine","stopExpoServerAsync","status","Project","currentStatus","stopAsync","underline","addNewLineIfNone","shouldBailWhenUsingLatest","currentSdkVersionString","attemptUpdateAgain","shouldUpgradeSimulatorAsync","Simulator","isPlatformSupported","default","upgradeSimulator","maybeUpgradeSimulatorAsync","upgradeExpoAsync","error","shouldUpgradeEmulatorAsync","Android","upgradeAndroid","maybeUpgradeEmulatorAsync","upgradeAsync","requestedSdkVersion","options","sdkVersions","releasedSdkVersionsAsync","latestSdkVersion","newestReleasedSdkVersionAsync","latestSdkVersionString","version","platforms","updateToLatestSdkVersion","sdkVersionStringOptions","filter","v","lte","selectedSdkVersionString","pageSize","choices","map","value","includes","attemptUnknownUpdate","packageManager","PackageManager","createForProject","npm","yarn","silent","getenv","boolish","expoPackageToInstall","installingPackageStep","addAsync","removingSdkVersionStep","_","updatingPackagesStep","updates","pickBy","_version","has","devDependenciesAsStringArray","dependenciesAsStringArray","length","addDevAsync","join","maybeCleanNpmStateAsync","clearingCacheStep","startReactNativeServerAsync","reset","nonPersistent","stopReactNativeServerAsync","green","grey","allDependencies","untouchedDependencies","difference","releaseNoteUrl","gray","skippedSdkVersions","_data","lt","gt","skippedSdkVersionKeys","releaseNotesUrls","values","data","reverse","url","NpmPackageManager","cleaningNpmStateStep","shouldInstallNodeModules","removeLockfileAsync","cleanAsync","reinstallingNodeModulesStep","installAsync","command","alias","option","description","asyncAction","process","cwd"],"mappings":"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","file":"../../commands/upgrade.js","sourceRoot":"/expo-cli@3.17.23/src"}