{"version":3,"file":"GoogleMobileAds.js","sourceRoot":"","sources":["../../src/android/GoogleMobileAds.ts"],"names":[],"mappings":";;;;;;;;;;;AAGA,SAAgB,uBAAuB,CAAC,MAAkB;;IACxD,wBAAO,MAAM,CAAC,OAAO,0CAAE,MAAM,0CAAE,oBAAoB,uCAAI,IAAI,EAAC;AAC9D,CAAC;AAFD,0DAEC;AAED,SAAgB,0BAA0B,CAAC,MAAkB;;IAC3D,wBAAO,MAAM,CAAC,OAAO,0CAAE,MAAM,0CAAE,uBAAuB,uCAAI,KAAK,EAAC;AAClE,CAAC;AAFD,gEAEC;AAED,SAAsB,wBAAwB,CAAC,MAAkB,EAAE,gBAA0B;;QAC3F,MAAM,KAAK,GAAG,uBAAuB,CAAC,MAAM,CAAC,CAAC;QAC9C,MAAM,QAAQ,GAAG,0BAA0B,CAAC,MAAM,CAAC,CAAC;QAEpD,IAAI,CAAC,KAAK,EAAE;YACV,OAAO,gBAAgB,CAAC;SACzB;QAED,IAAI,eAAe,GAAG,gBAAgB,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,CAChE,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,kBAAkB,CAC1D,CAAC,CAAC,CAAC,CAAC;QAEL,qBAAqB;QACrB,IAAI,qBAAqB,CAAC;QAC1B,MAAM,gBAAgB,GAAG;YACvB,CAAC,EAAE;gBACD,cAAc,EAAE,2CAA2C;gBAC3D,eAAe,EAAE,KAAK;aACvB;SACF,CAAC;QACF,IAAI,eAAe,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE;YAC/C,qBAAqB,GAAG,eAAe,CAAC,WAAW,CAAC,CAAC,MAAM,CACzD,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,2CAA2C,CACnF,CAAC;YACF,IAAI,qBAAqB,CAAC,MAAM,EAAE;gBAChC,qBAAqB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,GAAG,KAAK,CAAC;aACxD;iBAAM;gBACL,eAAe,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;aACrD;SACF;aAAM;YACL,eAAe,CAAC,WAAW,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;SACnD;QAED,sBAAsB;QACtB,IAAI,qBAAqB,CAAC;QAC1B,MAAM,gBAAgB,GAAG;YACvB,CAAC,EAAE;gBACD,cAAc,EAAE,uDAAuD;gBACvE,eAAe,EAAE,CAAC,QAAQ;aAC3B;SACF,CAAC;QACF,IAAI,eAAe,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE;YAC/C,qBAAqB,GAAG,eAAe,CAAC,WAAW,CAAC,CAAC,MAAM,CACzD,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,uDAAuD,CAC/F,CAAC;YACF,IAAI,qBAAqB,CAAC,MAAM,EAAE;gBAChC,qBAAqB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC;aAC5D;iBAAM;gBACL,eAAe,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;aACrD;SACF;aAAM;YACL,eAAe,CAAC,WAAW,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;SACnD;QAED,OAAO,gBAAgB,CAAC;IAC1B,CAAC;CAAA;AAvDD,4DAuDC","sourcesContent":["import { ExpoConfig } from '../Config.types';\nimport { Document } from './Manifest';\n\nexport function getGoogleMobileAdsAppId(config: ExpoConfig) {\n  return config.android?.config?.googleMobileAdsAppId ?? null;\n}\n\nexport function getGoogleMobileAdsAutoInit(config: ExpoConfig) {\n  return config.android?.config?.googleMobileAdsAutoInit ?? false;\n}\n\nexport async function setGoogleMobileAdsConfig(config: ExpoConfig, manifestDocument: Document) {\n  const appId = getGoogleMobileAdsAppId(config);\n  const autoInit = getGoogleMobileAdsAutoInit(config);\n\n  if (!appId) {\n    return manifestDocument;\n  }\n\n  let mainApplication = manifestDocument.manifest.application.filter(\n    (e: any) => e['$']['android:name'] === '.MainApplication'\n  )[0];\n\n  // add application ID\n  let existingApplicationId;\n  const newApplicationId = {\n    $: {\n      'android:name': 'com.google.android.gms.ads.APPLICATION_ID',\n      'android:value': appId,\n    },\n  };\n  if (mainApplication.hasOwnProperty('meta-data')) {\n    existingApplicationId = mainApplication['meta-data'].filter(\n      (e: any) => e['$']['android:name'] === 'com.google.android.gms.ads.APPLICATION_ID'\n    );\n    if (existingApplicationId.length) {\n      existingApplicationId[0]['$']['android:value'] = appId;\n    } else {\n      mainApplication['meta-data'].push(newApplicationId);\n    }\n  } else {\n    mainApplication['meta-data'] = [newApplicationId];\n  }\n\n  // add delay auto init\n  let existingDelayAutoInit;\n  const newDelayAutoInit = {\n    $: {\n      'android:name': 'com.google.android.gms.ads.DELAY_APP_MEASUREMENT_INIT',\n      'android:value': !autoInit,\n    },\n  };\n  if (mainApplication.hasOwnProperty('meta-data')) {\n    existingDelayAutoInit = mainApplication['meta-data'].filter(\n      (e: any) => e['$']['android:name'] === 'com.google.android.gms.ads.DELAY_APP_MEASUREMENT_INIT'\n    );\n    if (existingDelayAutoInit.length) {\n      existingDelayAutoInit[0]['$']['android:value'] = !autoInit;\n    } else {\n      mainApplication['meta-data'].push(newDelayAutoInit);\n    }\n  } else {\n    mainApplication['meta-data'] = [newDelayAutoInit];\n  }\n\n  return manifestDocument;\n}\n"]}