{"version":3,"file":"Scheme.js","sourceRoot":"","sources":["../../src/android/Scheme.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,mCAAgC;AAIhC,SAAgB,SAAS,CAAC,MAAkB;IAC1C,OAAO,OAAO,MAAM,CAAC,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;AAClE,CAAC;AAFD,8BAEC;AAED,SAAsB,SAAS,CAAC,MAAkB,EAAE,gBAA0B;;QAC5E,IAAI,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;QAC/B,IAAI,CAAC,MAAM,EAAE;YACX,OAAO,KAAK,CAAC;SACd;QAED,IAAI,YAAY,GAAG,gBAAgB,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CACzE,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,eAAe,CACvD,CAAC;QAEF,MAAM,SAAS,GAAG,yBAAyB,MAAM,KAAK,CAAC;QACvD,MAAM,gBAAgB,GAAG;;MAErB,SAAS;;;;mBAII,CAAC;QAClB,MAAM,MAAM,GAAG,IAAI,eAAM,EAAE,CAAC;QAC5B,MAAM,iBAAiB,GAAG,MAAM,MAAM,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,CAAC;QAE5E,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,eAAe,CAAC,EAAE;YACnD,YAAY,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,MAAM,CACxE,iBAAiB,CAAC,eAAe,CAAC,CACnC,CAAC;SACH;aAAM;YACL,YAAY,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,GAAG,iBAAiB,CAAC,eAAe,CAAC,CAAC;SACvE;QAED,OAAO,gBAAgB,CAAC;IAC1B,CAAC;CAAA;AA9BD,8BA8BC","sourcesContent":["import { Parser } from 'xml2js';\nimport { ExpoConfig } from '../Config.types';\nimport { Document } from './Manifest';\n\nexport function getScheme(config: ExpoConfig) {\n  return typeof config.scheme === 'string' ? config.scheme : null;\n}\n\nexport async function setScheme(config: ExpoConfig, manifestDocument: Document) {\n  let scheme = getScheme(config);\n  if (!scheme) {\n    return false;\n  }\n\n  let mainActivity = manifestDocument.manifest.application[0].activity.filter(\n    (e: any) => e['$']['android:name'] === '.MainActivity'\n  );\n\n  const schemeTag = `<data android:scheme=\"${scheme}\"/>`;\n  const intentFiltersXML = `\n  <intent-filter>\n    ${schemeTag}\n    <action android:name=\"android.intent.action.VIEW\"/>\n    <category android:name=\"android.intent.category.DEFAULT\"/>\n    <category android:name=\"android.intent.category.BROWSABLE\"/>\n  </intent-filter>`;\n  const parser = new Parser();\n  const intentFiltersJSON = await parser.parseStringPromise(intentFiltersXML);\n\n  if (mainActivity[0].hasOwnProperty('intent-filter')) {\n    mainActivity[0]['intent-filter'] = mainActivity[0]['intent-filter'].concat(\n      intentFiltersJSON['intent-filter']\n    );\n  } else {\n    mainActivity[0]['intent-filter'] = intentFiltersJSON['intent-filter'];\n  }\n\n  return manifestDocument;\n}\n"]}