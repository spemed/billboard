{"version":3,"file":"Branch.js","sourceRoot":"","sources":["../../src/android/Branch.ts"],"names":[],"mappings":";;;;;;;;;;;AAGA,SAAgB,eAAe,CAAC,MAAkB;;IAChD,8BAAO,MAAM,CAAC,OAAO,0CAAE,MAAM,0CAAE,MAAM,0CAAE,MAAM,uCAAI,IAAI,EAAC;AACxD,CAAC;AAFD,0CAEC;AAED,SAAsB,eAAe,CAAC,MAAkB,EAAE,gBAA0B;;QAClF,MAAM,MAAM,GAAG,eAAe,CAAC,MAAM,CAAC,CAAC;QAEvC,IAAI,CAAC,MAAM,EAAE;YACX,OAAO,gBAAgB,CAAC;SACzB;QAED,IAAI,eAAe,GAAG,gBAAgB,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,CAChE,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,kBAAkB,CAC1D,CAAC,CAAC,CAAC,CAAC;QAEL,IAAI,wBAAwB,CAAC;QAC7B,MAAM,mBAAmB,GAAG;YAC1B,CAAC,EAAE;gBACD,cAAc,EAAE,yBAAyB;gBACzC,eAAe,EAAE,MAAM;aACxB;SACF,CAAC;QACF,IAAI,eAAe,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE;YAC/C,wBAAwB,GAAG,eAAe,CAAC,WAAW,CAAC,CAAC,MAAM,CAC5D,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,yBAAyB,CACjE,CAAC;YACF,IAAI,wBAAwB,CAAC,MAAM,EAAE;gBACnC,wBAAwB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,GAAG,MAAM,CAAC;aAC5D;iBAAM;gBACL,eAAe,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;aACxD;SACF;aAAM;YACL,eAAe,CAAC,WAAW,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;SACtD;QAED,OAAO,gBAAgB,CAAC;IAC1B,CAAC;CAAA;AAhCD,0CAgCC","sourcesContent":["import { ExpoConfig } from '../Config.types';\nimport { Document } from './Manifest';\n\nexport function getBranchApiKey(config: ExpoConfig) {\n  return config.android?.config?.branch?.apiKey ?? null;\n}\n\nexport async function setBranchApiKey(config: ExpoConfig, manifestDocument: Document) {\n  const apiKey = getBranchApiKey(config);\n\n  if (!apiKey) {\n    return manifestDocument;\n  }\n\n  let mainApplication = manifestDocument.manifest.application.filter(\n    (e: any) => e['$']['android:name'] === '.MainApplication'\n  )[0];\n\n  let existingBranchApiKeyItem;\n  const newBranchApiKeyItem = {\n    $: {\n      'android:name': 'io.branch.sdk.BranchKey',\n      'android:value': apiKey,\n    },\n  };\n  if (mainApplication.hasOwnProperty('meta-data')) {\n    existingBranchApiKeyItem = mainApplication['meta-data'].filter(\n      (e: any) => e['$']['android:name'] === 'io.branch.sdk.BranchKey'\n    );\n    if (existingBranchApiKeyItem.length) {\n      existingBranchApiKeyItem[0]['$']['android:value'] = apiKey;\n    } else {\n      mainApplication['meta-data'].push(newBranchApiKeyItem);\n    }\n  } else {\n    mainApplication['meta-data'] = [newBranchApiKeyItem];\n  }\n\n  return manifestDocument;\n}\n"]}